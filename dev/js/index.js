function addTask(t){task_list.push(t),store.set("event",task_list)}function init(){task_list=store.get("event")||[],createHtml()}function createHtml(){switch($(".todo-list").html(null),store.get("showitem")){case"Active":$(".Active").addClass("selected");for(t=0;t<task_list.length;t++){e=bindHtml(task_list[t],t);task_list[t].completed?e.addClass("completed"):$(".todo-list").append(e)}break;case"Completed":$(".completed").addClass("selected");for(t=0;t<task_list.length;t++)task_list[t].completed&&((e=bindHtml(task_list[t],t)).addClass("completed"),$(".todo-list").append(e));break;default:$(".all").addClass("selected");for(var t=0;t<task_list.length;t++){var e=bindHtml(task_list[t],t);$(".todo-list").append(e),task_list[t].completed&&e.addClass("completed")}}deleteTask(),completed(),selectAll(),Active(),showAll(),showCompleted(),deleCompleted(),leftItem()}function bindHtml(t,e){var l="";return l='<li ng-class="{completed:Xtodo.completed,editing:Xtodo.id===currentEditingId}"  ng-repeat="Xtodo in todos | filter:selector"  data-id="'+e+'"><div class="view"><input class="toggle" type="checkbox" ng-model="Xtodo.completed" '+(t.completed?"checked":"")+'><label ng-dblclick="editing(Xtodo.id)">'+t.content+'</label><button class="destroy" ng-click="remove(Xtodo.id)"></button></div><form ng-submit="editing()"><input class="edit" ng-model="Xtodo.text"></form></li>',$(l)}function deleteTask(){$(".destroy").on("click",function(){var t=$(this).parent().parent().data("id");task_list.splice(t,1),store.set("event",task_list),createHtml()})}function completed(){$(".toggle").on("click",function(){var t=$(this).parent().parent().data("id");task_list[t].completed?upda_data({completed:!1},t):upda_data({completed:!0},t),createHtml(),isSelectAll(),leftItem()})}function upda_data(t,e){task_list[e]=$.extend({},task_list[e],t),store.set("event",task_list)}function selectAll(){$(".toggle-all").on("click",function(){for(var t=0;t<task_list.length;t++)task_list[t].completed=$(this)[0].checked,upda_data({completed:$(this)[0].checked},t);createHtml()})}function showAll(){$(".all").on("click",function(){$(".filters li a").removeClass(),$(this).addClass("selected"),store.set("showitem","all"),createHtml()})}function Active(){$(".Active").on("click",function(){$(".filters li a").removeClass(),$(this).addClass("selected"),store.set("showitem","Active"),createHtml()})}function showCompleted(){$(".completed").on("click",function(){$(".filters li a").removeClass(),$(this).addClass("selected"),store.set("showitem","Completed"),createHtml()})}function deleCompleted(){$(".clear-completed").on("click",function(){for(var t=0;t<task_list.length;t++)task_list[t].completed&&task_list.splice(t,1);store.set("event",task_list),createHtml()})}function isSelectAll(){for(var t=!0,e=0;e<task_list.length;e++)0==task_list[e].completed&&(t=!1);$(".toggle-all")[0].checked=!!t}function leftItem(){for(var t=0,e=0;e<task_list.length;e++)task_list[e].completed||t++;$(".todo-count strong").text(t)}var task_list=[],showitem="";init(),$(".add-task").on("submit",function(t){t.preventDefault(),obj={},obj.content=$(".new-todo").val(),$(".new-todo").val()&&($(".new-todo").val(""),addTask(obj),createHtml())});